import React from 'react';
import Login from './Login';
import { useSelector, useDispatch } from 'react-redux';
import { loginModal } from '../actions';
import { Link } from 'react-router-dom';
import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';
import {
  faCog,
  faThList,
  faUser,
  faSearch,
} from '@fortawesome/free-solid-svg-icons';
import './NavigationBar.css';
import useTheme from '../hooks/useTheme';
import axios from 'axios';

export default function NavigationBar() {
  const dispatch = useDispatch();
  const { isModal } = useSelector((state) => state.loginModalReducer);
  const { isLogin, isAdmin } = useSelector((state) => state.loginReducer);
  const [theme, themeToggler] = useTheme();

  const handleLogout = () => {
    axios
      .post(`${process.env.REACT_APP_SERVER_API}/users/logout`, '', {
        withCredentials: true,
      })
      .then(window.location.replace('/'))
      .catch((err) => console.log(err));
  };

  const handleModal = () => {
    dispatch(loginModal(!isModal));
  };

  return (
    <div className='navBar-container'>
      <div className='bar'>
        <svg
          width='479'
          height='199'
          viewBox='0 0 479 199'
          fill='none'
          xmlns='http://www.w3.org/2000/svg'
          className='home-logo web'
          onClick={() => {
            window.location.replace('/');
          }}
        >
          <path
            d='M110.742 160H99.1406L108.492 106H120.094L110.742 160Z'
            fill='#2AB2BB'
          />
          <path
            d='M11.7422 156H0.140625L9.49219 102H21.0938L11.7422 156Z'
            fill='#2AB2BB'
          />
          <path
          className='logo-text'
            d='M29.1953 53.1484C29.7109 50.5 28.2812 48.4492 24.9062 46.9961L19.1406 44.6055C11.0547 40.9727 7.21094 36.0273 7.60938 29.7695C7.77344 26.9102 8.75781 24.3672 10.5625 22.1406C12.3672 19.8906 14.8633 18.1445 18.0508 16.9023C21.2383 15.6602 24.7188 15.0625 28.4922 15.1094C33.5547 15.2031 37.6211 16.6797 40.6914 19.5391C43.7852 22.3984 45.3086 26.2305 45.2617 31.0352H33.3086C33.3789 29.0664 32.957 27.4961 32.043 26.3242C31.1523 25.1289 29.6758 24.5078 27.6133 24.4609C25.5977 24.4141 23.8164 24.8828 22.2695 25.8672C20.7227 26.8516 19.8086 28.1758 19.5273 29.8398C19.082 32.1836 20.8164 34.1055 24.7305 35.6055C28.668 37.1055 31.5273 38.3945 33.3086 39.4727C38.9102 42.8242 41.5352 47.3477 41.1836 53.043C40.9961 55.9961 40.0469 58.5859 38.3359 60.8125C36.625 63.0391 34.2461 64.7617 31.1992 65.9805C28.1758 67.1992 24.7773 67.7852 21.0039 67.7383C18.2383 67.6914 15.6719 67.2578 13.3047 66.4375C10.9375 65.6172 8.91016 64.4219 7.22266 62.8516C3.80078 59.6875 2.16016 55.5273 2.30078 50.3711L14.3594 50.4062C14.2188 53.0312 14.7227 55.0234 15.8711 56.3828C17.0195 57.7188 18.9531 58.3867 21.6719 58.3867C23.6875 58.3867 25.3633 57.9297 26.6992 57.0156C28.0586 56.0781 28.8906 54.7891 29.1953 53.1484ZM61.3633 33.1094C64.1992 29.8047 67.4688 28.1758 71.1719 28.2227C74.9922 28.3164 77.8164 29.7109 79.6445 32.4062C81.4961 35.1016 82.1641 38.7578 81.6484 43.375L77.7109 67H66.1445L70.1172 43.2344C70.2109 42.4375 70.2344 41.6875 70.1875 40.9844C70.0234 38.6641 68.7344 37.4688 66.3203 37.3984C64.2344 37.3516 62.3828 38.1133 60.7656 39.6836L55.9141 67H44.3477L53.7344 13H65.3008L61.3633 33.1094ZM105.871 67C105.543 66.0859 105.379 64.9375 105.379 63.5547C102.777 66.4141 99.6719 67.7969 96.0625 67.7031C92.7578 67.6562 90.0156 66.5547 87.8359 64.3984C85.6562 62.2422 84.6367 59.6289 84.7773 56.5586C84.8945 52.4336 86.6172 49.2695 89.9453 47.0664C93.2734 44.8398 97.8203 43.7266 103.586 43.7266L107.453 43.7969L107.875 41.6523L108.016 39.7891C107.922 37.6562 106.855 36.5547 104.816 36.4844C102.285 36.4375 100.727 37.832 100.141 40.668L88.5391 40.7031C88.6562 38.1484 89.4883 35.9336 91.0352 34.0586C92.582 32.1602 94.6797 30.707 97.3281 29.6992C100 28.668 102.836 28.1875 105.836 28.2578C108.719 28.3281 111.238 28.9375 113.395 30.0859C115.574 31.2109 117.203 32.793 118.281 34.832C119.359 36.8477 119.77 39.1797 119.512 41.8281L116.664 59.7227L116.488 61.9023C116.395 63.6367 116.617 65.1133 117.156 66.332L117.121 67H105.871ZM99.2617 59.3359C101.629 59.4297 103.703 58.3867 105.484 56.207L106.645 50.0898L103.656 50.0547C101.805 50.1016 100.211 50.6523 98.875 51.707C97.5391 52.7383 96.7539 54.1562 96.5195 55.9609C96.4023 56.9219 96.5781 57.7188 97.0469 58.3516C97.5391 58.9609 98.2773 59.2891 99.2617 59.3359ZM134.031 67H122.43L131.781 13H143.383L134.031 67ZM153.578 67H141.977L151.328 13H162.93L153.578 67ZM220.973 47.7695L231.66 15.8125H243.824L225.262 67H212.816L210.742 37.9961L199.703 67H187.258L184.691 15.8125H196.398L197.102 47.6289L208.844 15.8125H219.074L220.973 47.7695ZM257.605 67.7031C254.207 67.6797 251.172 66.8828 248.5 65.3125C245.852 63.7188 243.848 61.5156 242.488 58.7031C241.129 55.8672 240.59 52.75 240.871 49.3516L240.977 48.3672C241.609 42.1094 243.777 37.1641 247.48 33.5312C251.207 29.875 255.766 28.1172 261.156 28.2578C264.414 28.3047 267.203 29.1367 269.523 30.7539C271.844 32.3477 273.543 34.5625 274.621 37.3984C275.699 40.2109 276.051 43.375 275.676 46.8906L275.008 51.707H252.367C252.414 53.6992 252.977 55.3164 254.055 56.5586C255.133 57.8008 256.703 58.457 258.766 58.5273C262.117 58.6211 265.129 57.332 267.801 54.6602L272.652 61.0938C271.223 63.1328 269.219 64.7383 266.641 65.9102C264.086 67.0586 261.285 67.6562 258.238 67.7031H257.605ZM260.418 37.3633C258.777 37.3164 257.348 37.832 256.129 38.9102C254.934 39.9883 253.891 41.793 253 44.3242H264.566L264.777 43.3047C264.918 42.4844 264.941 41.7109 264.848 40.9844C264.449 38.6406 262.973 37.4336 260.418 37.3633Z'
            fill='#676767'
            fill-opacity='0.73'
          />
          <path
            className='logo-text'
            d='M150.602 165.25C144.56 165.208 139.164 163.792 134.414 161C129.706 158.167 126.143 154.25 123.727 149.25C121.31 144.208 120.352 138.667 120.852 132.625L121.039 130.875C122.164 119.75 126.018 110.958 132.602 104.5C139.227 98 147.331 94.875 156.914 95.125C162.706 95.2083 167.664 96.6875 171.789 99.5625C175.914 102.396 178.935 106.333 180.852 111.375C182.768 116.375 183.393 122 182.727 128.25L181.539 136.812H141.289C141.372 140.354 142.372 143.229 144.289 145.438C146.206 147.646 148.997 148.812 152.664 148.938C158.622 149.104 163.977 146.812 168.727 142.062L177.352 153.5C174.81 157.125 171.247 159.979 166.664 162.062C162.122 164.104 157.143 165.167 151.727 165.25H150.602ZM155.602 111.312C152.685 111.229 150.143 112.146 147.977 114.062C145.852 115.979 143.997 119.188 142.414 123.688H162.977L163.352 121.875C163.602 120.417 163.643 119.042 163.477 117.75C162.768 113.583 160.143 111.438 155.602 111.312ZM223.352 164C222.768 162.375 222.477 160.333 222.477 157.875C217.852 162.958 212.331 165.417 205.914 165.25C200.039 165.167 195.164 163.208 191.289 159.375C187.414 155.542 185.602 150.896 185.852 145.438C186.06 138.104 189.122 132.479 195.039 128.562C200.956 124.604 209.039 122.625 219.289 122.625L226.164 122.75L226.914 118.938L227.164 115.625C226.997 111.833 225.102 109.875 221.477 109.75C216.977 109.667 214.206 112.146 213.164 117.188L192.539 117.25C192.747 112.708 194.227 108.771 196.977 105.438C199.727 102.062 203.456 99.4792 208.164 97.6875C212.914 95.8542 217.956 95 223.289 95.125C228.414 95.25 232.893 96.3333 236.727 98.375C240.602 100.375 243.497 103.188 245.414 106.812C247.331 110.396 248.06 114.542 247.602 119.25L242.539 151.062L242.227 154.938C242.06 158.021 242.456 160.646 243.414 162.812L243.352 164H223.352ZM211.602 150.375C215.81 150.542 219.497 148.688 222.664 144.812L224.727 133.938L219.414 133.875C216.122 133.958 213.289 134.938 210.914 136.812C208.539 138.646 207.143 141.167 206.727 144.375C206.518 146.083 206.831 147.5 207.664 148.625C208.539 149.708 209.852 150.292 211.602 150.375ZM273.414 164H252.789L269.414 68H290.039L273.414 164ZM325.039 79.5625L322.102 96.375H332.914L330.352 111H319.539L314.289 142.062C313.997 144.188 314.122 145.792 314.664 146.875C315.247 147.958 316.664 148.542 318.914 148.625C319.789 148.667 321.581 148.562 324.289 148.312L322.789 163.562C319.331 164.688 315.643 165.208 311.727 165.125C305.352 165.042 300.581 163.167 297.414 159.5C294.247 155.833 292.956 150.854 293.539 144.562L299.039 111H290.664L293.164 96.375H301.539L304.477 79.5625H325.039ZM359.477 103.75C364.518 97.875 370.331 94.9792 376.914 95.0625C383.706 95.2292 388.727 97.7083 391.977 102.5C395.268 107.292 396.456 113.792 395.539 122L388.539 164H367.977L375.039 121.75C375.206 120.333 375.247 119 375.164 117.75C374.872 113.625 372.581 111.5 368.289 111.375C364.581 111.292 361.289 112.646 358.414 115.438L349.789 164H329.227L345.914 68H366.477L359.477 103.75ZM421.352 135.312C421.852 125.396 425.039 117.854 430.914 112.688L436.102 108.562C438.935 106.271 441.06 103.958 442.477 101.625C443.935 99.2917 444.602 96.5625 444.477 93.4375C444.352 89.7708 442.414 87.875 438.664 87.75C436.247 87.6667 434.206 88.5417 432.539 90.375C430.914 92.2083 429.768 94.7917 429.102 98.125L408.539 98.25C409.164 89.9167 412.352 83.375 418.102 78.625C423.852 73.8333 431.164 71.5208 440.039 71.6875C445.414 71.8125 450.102 72.875 454.102 74.875C458.143 76.875 461.143 79.6875 463.102 83.3125C465.06 86.9375 465.872 91.1667 465.539 96C465.039 103.042 461.081 109.583 453.664 115.625L446.352 121.438C442.06 125.062 439.456 129.646 438.539 135.188L421.352 135.312ZM414.852 154.625C414.768 151.417 415.852 148.771 418.102 146.688C420.352 144.604 423.06 143.562 426.227 143.562C429.435 143.562 432.102 144.542 434.227 146.5C436.352 148.458 437.456 150.896 437.539 153.812C437.622 157.021 436.539 159.667 434.289 161.75C432.081 163.792 429.372 164.812 426.164 164.812C423.081 164.812 420.435 163.896 418.227 162.062C416.06 160.188 414.935 157.708 414.852 154.625Z'
            fill='#676767'
          />
          <path
            d='M29.875 174H9.25L25.875 78H46.5L29.875 174ZM96.25 174H75.625L92.25 78H112.875L96.25 174Z'
            fill='#39CFD9'
          />
          <line
            x1='38.1455'
            y1='123.913'
            x2='83.0854'
            y2='131.03'
            stroke='#5A5A5A'
            stroke-width='11'
          />
        </svg>
        {/* <img alt='logo' src='img/logo.svg' className='home-logo web' onError={(e) => { e.target.onerror = null; e.target.src = '../img/logo.svg' }} onClick={() => { window.location.replace('/') }} /> */}
        <img
          alt='logo'
          src='img/symbol.svg'
          className='home-logo mobile'
          onError={(e) => {
            e.target.onerror = null;
            e.target.src = '../img/symbol.svg';
          }}
          onClick={() => {
            window.location.replace('/');
          }}
        />
        <div className='btn-board'>
          <Link
            to='/board'
            style={{ color: 'inherit', textDecoration: 'inherit' }}
          >
            <span className='web'>매칭 게시판</span>
            <FontAwesomeIcon className='board mobile' icon={faThList} />
          </Link>
        </div>
        <div className='btn-search'>
          <Link
            to='/find-partner'
            style={{ color: 'inherit', textDecoration: 'inherit' }}
          >
            <span className='web'>메이트 모집</span>
            <FontAwesomeIcon className='find-partner mobile' icon={faSearch} />
          </Link>
        </div>
        {isLogin ? (
          <>
            <div className='btn-mypage'>
              <Link
                to='/mypage'
                style={{ color: 'inherit', textDecoration: 'inherit' }}
              >
                <span className='web'>마이페이지</span>
                <FontAwesomeIcon className='mypage mobile' icon={faUser} />
              </Link>
            </div>
            <div className='btn-logout'>
              <span onClick={handleLogout}>로그아웃</span>
            </div>
          </>
        ) : (
          <>
            <div className='btn-login-nav'>
              <span onClick={handleModal}>로그인</span>
            </div>
            <div className='btn-signup'>
              <Link
                to='/signup'
                style={{ color: 'inherit', textDecoration: 'inherit' }}
              >
                <span>회원가입</span>
              </Link>
            </div>
          </>
        )}
        {isAdmin && isLogin ? (
          <div className='btn-admin'>
            <Link
              to='/admin'
              style={{ color: 'inherit', textDecoration: 'inherit' }}
            >
              <FontAwesomeIcon icon={faCog} />
            </Link>
          </div>
        ) : (
          ''
        )}
      </div>
      {isModal ? <Login /> : ''}
    </div>
  );
}
